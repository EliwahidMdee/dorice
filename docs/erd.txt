===================================================================================
                    ENTITY-RELATIONSHIP DIAGRAM (ERD)
                    Bank Data Analysis System
===================================================================================

ENTITIES AND RELATIONSHIPS:

┌─────────────────────────────────────────────────────────────────────────────┐
│                                                                             │
│  ┌──────────────────┐                                                      │
│  │     ACCOUNTS     │                                                      │
│  ├──────────────────┤                                                      │
│  │ PK account_id    │                                                      │
│  │  customer_name   │                                                      │
│  │     email        │                                                      │
│  │     phone        │                                                      │
│  │  account_type    │                                                      │
│  │    balance       │                                                      │
│  │  date_opened     │                                                      │
│  │    branch        │                                                      │
│  │    status        │                                                      │
│  │   created_at     │                                                      │
│  │   updated_at     │                                                      │
│  └──────────────────┘                                                      │
│          │                                                                  │
│          │ 1                                                                │
│          │                                                                  │
│          ├──────────────────────┬──────────────────────┐                   │
│          │                      │                      │                   │
│          │ N                    │ N                    │ N                 │
│          ▼                      ▼                      ▼                   │
│  ┌──────────────────┐  ┌──────────────────┐  ┌──────────────────┐         │
│  │  TRANSACTIONS    │  │      LOANS       │  │      CARDS       │         │
│  ├──────────────────┤  ├──────────────────┤  ├──────────────────┤         │
│  │PK transaction_id │  │ PK  loan_id      │  │ PK  card_id      │         │
│  │FK account_id     │  │ FK  account_id   │  │ FK  account_id   │         │
│  │transaction_type  │  │   loan_type      │  │   card_type      │         │
│  │     amount       │  │    amount        │  │  card_number     │         │
│  │transaction_date  │  │ interest_rate    │  │  expiry_date     │         │
│  │  description     │  │duration_months   │  │  credit_limit    │         │
│  │    status        │  │  start_date      │  │    status        │         │
│  │  created_at      │  │    status        │  │  created_at      │         │
│  │  updated_at      │  │monthly_payment   │  │  updated_at      │         │
│  └──────────────────┘  │  created_at      │  └──────────────────┘         │
│                        │  updated_at      │                                │
│                        └──────────────────┘                                │
│                                                                             │
└─────────────────────────────────────────────────────────────────────────────┘

===================================================================================
                            RELATIONSHIP DETAILS
===================================================================================

1. ACCOUNTS ──< TRANSACTIONS
   - Type: One-to-Many
   - Cardinality: One account can have multiple transactions
   - Each transaction belongs to exactly one account

2. ACCOUNTS ──< LOANS
   - Type: One-to-Many
   - Cardinality: One account can have multiple loans
   - Each loan belongs to exactly one account

3. ACCOUNTS ──< CARDS
   - Type: One-to-Many
   - Cardinality: One account can have multiple cards (debit/credit)
   - Each card belongs to exactly one account

===================================================================================
                            ENTITY DESCRIPTIONS
===================================================================================

ACCOUNTS
--------
Primary Key: account_id (INT, AUTO_INCREMENT)
Purpose: Stores bank account information and customer details
Attributes:
  - account_id: Unique identifier for each account
  - customer_name: Full name of the account holder
  - email: Email address (unique)
  - phone: Contact phone number
  - account_type: Type of account (Savings, Checking, Business, Fixed Deposit)
  - balance: Current account balance
  - date_opened: Date when account was opened
  - branch: Bank branch where account was opened
  - status: Account status (Active, Closed, Frozen, Dormant)
  - created_at: Record creation timestamp
  - updated_at: Last update timestamp

TRANSACTIONS
------------
Primary Key: transaction_id (INT, AUTO_INCREMENT)
Foreign Key:
  - account_id → ACCOUNTS(account_id)
Purpose: Records all financial transactions for accounts
Attributes:
  - transaction_id: Unique identifier for each transaction
  - account_id: Reference to account
  - transaction_type: Type of transaction (Deposit, Withdrawal, Transfer, Payment, Interest)
  - amount: Transaction amount
  - transaction_date: Date of transaction
  - description: Transaction description
  - status: Transaction status (Pending, Completed, Failed, Reversed)
  - created_at: Record creation timestamp
  - updated_at: Last update timestamp

LOANS
-----
Primary Key: loan_id (INT, AUTO_INCREMENT)
Foreign Key:
  - account_id → ACCOUNTS(account_id)
Purpose: Stores loan information and repayment details
Attributes:
  - loan_id: Unique identifier for each loan
  - account_id: Reference to account
  - loan_type: Type of loan (Personal, Home, Auto, Business, Education)
  - amount: Loan amount
  - interest_rate: Annual interest rate percentage
  - duration_months: Loan duration in months
  - start_date: Loan start date
  - status: Loan status (Active, Paid, Defaulted, Closed)
  - monthly_payment: Monthly payment amount
  - created_at: Record creation timestamp
  - updated_at: Last update timestamp

CARDS
-----
Primary Key: card_id (INT, AUTO_INCREMENT)
Foreign Key:
  - account_id → ACCOUNTS(account_id)
Purpose: Stores debit and credit card information
Attributes:
  - card_id: Unique identifier for each card
  - account_id: Reference to account
  - card_type: Type of card (Debit, Credit)
  - card_number: Card number (unique)
  - expiry_date: Card expiry date
  - credit_limit: Credit limit (for credit cards)
  - status: Card status (Active, Blocked, Expired, Cancelled)
  - created_at: Record creation timestamp
  - updated_at: Last update timestamp

===================================================================================
                            NORMALIZATION
===================================================================================

The database schema follows Third Normal Form (3NF):

1st Normal Form (1NF):
  ✓ All attributes contain atomic values
  ✓ Each column contains values of a single type
  ✓ Each column has a unique name
  ✓ No repeating groups

2nd Normal Form (2NF):
  ✓ Meets 1NF requirements
  ✓ All non-key attributes are fully functionally dependent on the primary key
  ✓ No partial dependencies exist

3rd Normal Form (3NF):
  ✓ Meets 2NF requirements
  ✓ No transitive dependencies
  ✓ All attributes depend only on the primary key

===================================================================================
                            CONSTRAINTS & INTEGRITY
===================================================================================

Primary Key Constraints:
  - Each table has a unique, auto-incrementing primary key
  - Ensures entity integrity

Foreign Key Constraints:
  - TRANSACTIONS.account_id → ACCOUNTS.account_id (ON DELETE RESTRICT)
  - LOANS.account_id → ACCOUNTS.account_id (ON DELETE RESTRICT)
  - CARDS.account_id → ACCOUNTS.account_id (ON DELETE RESTRICT)
  - Ensures referential integrity

Check Constraints:
  - account_type CHECK (account_type IN ('Savings', 'Checking', 'Business', 'Fixed Deposit'))
  - account status CHECK (status IN ('Active', 'Closed', 'Frozen', 'Dormant'))
  - transaction_type CHECK (transaction_type IN ('Deposit', 'Withdrawal', 'Transfer', 'Payment', 'Interest'))
  - transaction status CHECK (status IN ('Pending', 'Completed', 'Failed', 'Reversed'))
  - loan_type CHECK (loan_type IN ('Personal', 'Home', 'Auto', 'Business', 'Education'))
  - loan status CHECK (status IN ('Active', 'Paid', 'Defaulted', 'Closed'))
  - interest_rate CHECK (interest_rate >= 0)
  - duration_months CHECK (duration_months > 0)
  - card_type CHECK (card_type IN ('Debit', 'Credit'))
  - card status CHECK (status IN ('Active', 'Blocked', 'Expired', 'Cancelled'))

Unique Constraints:
  - ACCOUNTS.email (unique)
  - CARDS.card_number (unique)

Indexes:
  - idx_email on ACCOUNTS(email)
  - idx_account_type on ACCOUNTS(account_type)
  - idx_branch on ACCOUNTS(branch)
  - idx_status on ACCOUNTS(status)
  - idx_account_id on TRANSACTIONS(account_id)
  - idx_transaction_type on TRANSACTIONS(transaction_type)
  - idx_transaction_date on TRANSACTIONS(transaction_date)
  - idx_status on TRANSACTIONS(status)
  - idx_account_id on LOANS(account_id)
  - idx_loan_type on LOANS(loan_type)
  - idx_status on LOANS(status)
  - idx_account_id on CARDS(account_id)
  - idx_card_type on CARDS(card_type)
  - idx_status on CARDS(status)

===================================================================================
                            VIEWS
===================================================================================

account_transaction_summary:
  - Combines ACCOUNTS and TRANSACTIONS
  - Provides comprehensive view of account transactions
  - Shows total deposits, withdrawals, and transaction counts
  - Used for reporting and analysis

account_statistics:
  - Aggregates account data by type
  - Shows total accounts, balances, and status counts per type
  - Used for dashboard and analytics

===================================================================================
